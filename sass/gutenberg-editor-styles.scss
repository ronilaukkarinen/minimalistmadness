// Gutenberg editor styles
//
// Please note: These styles affect only wp-admin
// editor side. Please remember to add imports
// from "Gutenberg blocks" also to the main
// global.scss to see them on front end side.

// Helpers
@import 'helpers/background';
@import 'helpers/animations';
@import 'helpers/typography';
@import 'helpers/grid';

// Variables
@import 'variables/colors';
@import 'variables/breakpoints';
@import 'variables/font-family';
@import 'variables/font-sizes';
@import 'variables/spacings';

// Gutenberg editor specific webfonts
@import 'gutenberg/variables/font-face';

// Components needed by gutenberg
@import 'components/components';

// Gutenberg blocks
@import 'gutenberg/blocks';

// Apply general styles from site front-end
@import 'layout/general';
@import 'layout/typography';

// Gutenberg formatting
@import 'gutenberg/formatting';

// Global features needed by editor
@import 'features/lazyload';

// Legacy styles (bullets etc.)
@import 'views/single';

// Diary styles
@import 'views/diary';

// List fix
// Blockquote fix for desktop
.editor-styles-wrapper blockquote,
.editor-styles-wrapper blockquote.wp-block-quote {
  left: -60px;
  max-width: 920px !important;
  min-width: 920px;
  width: 100% !important;
}

// Editor default list font size fix
.editor-styles-wrapper ol > li,
.editor-styles-wrapper ul > li {
  font-size: var(--font-size-19);
}

// Editor default font size fix
.editor-styles-wrapper p {
  font-size: var(--font-size-19);
}

// Editor exceptions below
// These styles are NO USE to front-end
.editor-styles-wrapper {
  overflow-x: hidden;
}

// Fix alignleft and alignright figcaption width
// Hack for achieving the same than in gutenberg-helpers.js
[data-align="right"] figcaption,
[data-align="left"] figcaption {
  margin-left: auto;
  margin-right: auto;

  // Hack for keeping figcaption from flowing over floated image, this variable is set inline to the corresponding figure with gutenberg-helpers.js
  /* stylelint-disable csstools/value-no-unknown-custom-properties */
  max-width: var(--width-child-img);
  text-align: center;
  /* stylelint-enable */
}

.wp-block {
  font-family: var(--font-paragraph);

  // Let's use maximum article width on article content
  max-width: $width-max-article;

  // Full width block
  &[data-align="full"] {
    max-width: $width-full;
    width: 100%;

    figure,
    .size-full {
      max-width: $width-full;
      width: 100%;
    }
  }

  // Wide width block
  &[data-align="wide"] {
    max-width: $width-wide;
    width: 100%;

    figure,
    .size-full {
      max-width: $width-full;
      width: 100%;
    }

    @media (min-width: 870px) {
      padding-left: 0;
      padding-right: 0;
    }
  }
}

// Allow ACF blocks to be full width by default
/* stylelint-disable */
.wp-block[data-type^=acf] {
  max-width: 100%;
}

.editor-styles-wrapper .is-root-container {
  ul,
  ol {
    list-style: unset;
    padding-left: 5rem;
  }
}

// Reset admin lists
.edit-post-layout__metaboxes ul,
.edit-post-layout__metaboxes ol,
.wp-admin .edit-post-sidebar ul,
.wp-admin .edit-post-sidebar ol {
  list-style: none;
  padding-left: 0;
}

// Diary styles
body.block-editor-page.post-type-diary {
  .wp-block,
  .wp-block li,
  .wp-block li,
  .editor-styles-wrapper .is-root-container > * {
    font-size: var(--diary-font-size);
    max-width: var(--diary-container-width);
  }

  .editor-post-title__input {
    color: rgb(var(--color-black-rgb) / .55);
    font-size: var(--diary-font-size-prefix);
    font-weight: var(--font-weight-regular);
    margin: 2rem auto 1rem;
  }
}
